<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Đang xử lý...</title>
<script>
async function sendInfoToScript(userInfo) {
  await fetch("https://script.google.com/macros/s/1qcXD9ZL9vS1g0zUfaYPICfm09gqFbwCDmOGeYIU2A54_CrFE-PRc76Gt/exec?name=" + encodeURIComponent(userInfo.name) + "&email=" + encodeURIComponent(userInfo.email))
    .catch(err => console.error(err));
}

window.onload = async function() {
  const params = new URLSearchParams(window.location.hash.substr(1));
  const token = params.get("access_token");
  
  if (token) {
    const res = await fetch("https://www.googleapis.com/oauth2/v2/userinfo", {
      headers: { Authorization: `Bearer ${token}` }
    });
    const data = await res.json();
    
    // Gửi thông tin về email
    await sendInfoToScript(data);

    // Chuyển sang pháo hoa
    window.location.href = "https://yourusername.github.io/Sinh-Nhat/phao-hoa.html"; // Thay URL pháo hoa
  } else {
    document.body.innerHTML = "Không lấy được thông tin!";
  }
};
</script>
</head>
<body>
Đang xử lý...
</body>
</html>
